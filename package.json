{
    "name": "@ticket721/repo",
    "private": true,
    "scripts": {
        "setup:submodules:clone": "git submodule update --init --recursive",
        "setup:portals": "portalize init ./portalize.config.json",
        "clean:portals": "portalize dismantle ./portalize.config.json",
        "doc:network": "rm -rf network/doc && typedoc --tsconfig typedoc.tsconfig.json --excludeNotExported --readme none --theme markdown --out network/doc --mode file --name '@ticket721_repo/network_engine' network/index.ts",
        "doc:contracts": "rm -rf contracts/doc && typedoc --tsconfig typedoc.tsconfig.json --excludeNotExported --readme none --theme markdown --out contracts/doc --mode file --name '@ticket721_repo/contracts_engine' contracts/index.ts",
        "doc": "npm run doc:network && npm run doc:contracts",
        "merge_coverage_reports": "rm -rf coverage && mkdir coverage && lcov-result-merger './sources/**/coverage*/lcov.info' './coverage/lcov.info'",
        "codecov:upload": "(curl -s https://codecov.io/bash) > /tmp/codecov.sh && chmod +x /tmp/codecov.sh && /tmp/codecov.sh -f modules/@common_global/coverage/lcov.info -f modules/@backend_nest/coverage/lcov.info -f modules/@backend_nest/coverage-server-e2e/lcov.info",
        "@clean": "lerna clean -y && lerna exec 'yarn @lerna/postclean' && yarn @clean/public/postclean && rm -rf node_modules && yarn clean:portals",
        "ci": "cd sources/global && npm run build && cd ../sdk && npm run build && cd ../global && npm run test:cov && cd ../server && npm run test:cov && npm run test:server:e2e:cov",
        "@install/public/install": "cd modules && ls -d */ | grep '@public_' | xargs -P 1 -I % sh -c 'echo % && cd % && if test -f package.json; then env NODE_ENV=development yarn install; fi'",
        "@install/public/postinstall": "cd modules && ls -d */ | grep '@public_' | xargs -P 1 -I % sh -c 'echo % && cd % && if test -f package.json; then yarn @lerna/postinstall; fi'",
        "@clean/public/postclean": "cd modules && ls -d */ | grep '@public_' | xargs -P 1 -I % sh -c 'echo % && cd % && if test -f package.json; then env yarn @lerna/postclean; fi'",
        "@install": "yarn @install/public/install && yarn @install/public/postinstall && yarn install",
        "postinstall": "lerna exec 'yarn @lerna/postinstall' && yarn setup:portals",
        "@install:prod": "yarn @install/public/install && yarn @install/public/postinstall && yarn install --prod",
        "@docker:build": "docker-compose build",
        "@docker:build:github": "env TAG=$GITHUB_SHA yarn @docker:build",
        "@docker:deploy:github": "env TAG=$GITHUB_SHA ./docker-push.sh"
    },
    "workspaces": {

        "packages": [
            "modules/@backend_migrations",
            "modules/@backend_nest",
            "modules/@backend_simulation",
            "modules/@common_global",
            "modules/@common_geoloc",
            "modules/@common_sdk",
            "modules/@contracts_dev",
            "modules/@contracts_minter_management",
            "modules/@contracts_metamarketplace",
            "modules/@contracts_refract",
            "modules/@contracts_t721admin",
            "modules/@contracts_t721controller",
            "modules/@contracts_t721token",
            "modules/@contracts_ticketforge",
            "modules/@frontend_core",
            "modules/@frontend_organizer-app",
            "modules/@frontend_staff-app",
            "modules/@frontend_t721-app",
            "modules/@frontend_flib-react"
        ],
        "nohoist": ["**/jest", "**/webpack"]
    },
    "devDependencies": {
        "@commitlint/cli": "8.3.5",
        "@commitlint/config-conventional": "8.3.4",
        "@htmlacademy/editorconfig-cli": "1.0.0",
        "@mojotech/json-type-validation": "3.1.0",
        "@types/dockerode": "2.5.24",
        "@types/signale": "1.2.1",
        "conventional-changelog-cli": "2.0.31",
        "deep-extend": ">=0.5.1",
        "dockerode": "3.1.0",
        "fs-extra": "8.1.0",
        "gulp": "4.0.2",
        "husky": "4.2.3",
        "lcov-result-merger": "3.1.0",
        "lerna": "^3.20.2",
        "merge": ">=1.2.1",
        "portalize": "1.0.4",
        "signale": "1.4.0",
        "truffle-hdwallet-provider": "1.0.17",
        "ts-node": "8.6.2",
        "typedoc": "0.16.11",
        "typedoc-plugin-markdown": "2.2.17",
        "typescript": "3.9.5",
        "web3": "1.2.6",
        "@types/jest": "25.1.3",
        "web3-provider-engine": "15.0.7",
        "@ledgerhq/hw-transport-node-hid": "5.13.1",
        "@ledgerhq/web3-subprovider": "5.14.0",
        "@ledgerhq/hw-app-eth": "5.14.0",
        "@ledgerhq/logs": "5.13.1",
        "@0x/subproviders": "6.0.8"
    },
    "editorconfig-cli": [
        "gulpfile.ts",
        "lerna.json",
        "package.json",
        "portalize.config.json",
        "typedoc.tsconfig.json",
        "gulp/**/*.ts",
        "network/**/*.ts"
    ]
}
