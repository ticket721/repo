import { encodeMetaTransaction } from '@lib/common/txs/utils/encodeMetaTransaction';

describe('encodeMetaTransaction', function() {
    it('should build mtx evm arguments', async function() {
        const mtxpayload = {
            nonce: 6,
            parameters: [
                {
                    from: '0x0CF540A5A6706Bc5f24850A8D0778b499fa8700A',
                    to: '0x4B2Ef35de91D5e4f2941B8A9B0B9E35554f0D8a8',
                    relayer: '0x1eadac420E7599a355813e63E94250C3384Cc27d',
                    data:
                        '0xdc2ddcae0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000e406576656e742f6d6f64756c6573000000000000000000000000000000000000',
                    value: '0',
                },
                {
                    from: '0x0CF540A5A6706Bc5f24850A8D0778b499fa8700A',
                    to: '0x4B2Ef35de91D5e4f2941B8A9B0B9E35554f0D8a8',
                    relayer: '0x1eadac420E7599a355813e63E94250C3384Cc27d',
                    data:
                        '0xa032c39b0b5715575956199ac6b31399d7f10ed634f244989b8aac42132235d234524f6400000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000340000000000000000000000000000000000000000000000000000000000000048000000000000000000000000000000000000000000000000000000000000000150000000000000000000000000000000000000000000000000000000000000064000000000000000000000000000000000000000000000000000000005e4d799e000000000000000000000000000000000000000000000000000000005e4eaefe000000000000000000000000000000000000000000000000000000005e4d799e000000000000000000000000000000000000000000000000000000005e4eaefe0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006400000000000000000000000000000000000000000000000000000000000000c8000000000000000000000000000000000000000000000000000000005e4d799e000000000000000000000000000000000000000000000000000000005e4eaefe000000000000000000000000000000000000000000000000000000005e4d799e000000000000000000000000000000000000000000000000000000005e4eaefe0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006400000000000000000000000000000000000000000000000000000000000000c8000000000000000000000000000000000000000000000000000000005e4d799e000000000000000000000000000000000000000000000000000000005e4eaefe000000000000000000000000000000000000000000000000000000005e4d799e000000000000000000000000000000000000000000000000000000005e4eaefe000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000640000000000000000000000000000000000000000000000000000000000000009000000000000000000000000c9352e7c5b4c3ff202bf1cbc7f8ec8a659e7c98e000000000000000000000000c9352e7c5b4c3ff202bf1cbc7f8ec8a659e7c98e000000000000000000000000813a9cdaa69b617baa5f220686670b42c6af9edd000000000000000000000000c9352e7c5b4c3ff202bf1cbc7f8ec8a659e7c98e000000000000000000000000c9352e7c5b4c3ff202bf1cbc7f8ec8a659e7c98e000000000000000000000000813a9cdaa69b617baa5f220686670b42c6af9edd000000000000000000000000c9352e7c5b4c3ff202bf1cbc7f8ec8a659e7c98e000000000000000000000000c9352e7c5b4c3ff202bf1cbc7f8ec8a659e7c98e000000000000000000000000813a9cdaa69b617baa5f220686670b42c6af9edd00000000000000000000000000000000000000000000000000000000000000067669705f300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000726567756c61725f305f300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000726567756c61725f315f300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
                    value: '0',
                },
            ],
        };

        const signature =
            '0x6dcf7ce661e6bd9f088d5e97ab0403721436eb4c5dbaab04e30086acbae23d9f6c02dca3308d6d93894fc6b0e9e118c489bd7343c81f5cb65a92e47dc72919e31c';

        const args = await encodeMetaTransaction(mtxpayload, signature);

        expect(args).toEqual([
            6,
            [
                '0x4B2Ef35de91D5e4f2941B8A9B0B9E35554f0D8a8',
                '0x1eadac420E7599a355813e63E94250C3384Cc27d',
                '0x4B2Ef35de91D5e4f2941B8A9B0B9E35554f0D8a8',
                '0x1eadac420E7599a355813e63E94250C3384Cc27d',
            ],
            ['0', '100', '0', '1380'],
            '0x6dcf7ce661e6bd9f088d5e97ab0403721436eb4c5dbaab04e30086acbae23d9f6c02dca3308d6d93894fc6b0e9e118c489bd7343c81f5cb65a92e47dc72919e31cdc2ddcae0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000e406576656e742f6d6f64756c6573000000000000000000000000000000000000a032c39b0b5715575956199ac6b31399d7f10ed634f244989b8aac42132235d234524f6400000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000340000000000000000000000000000000000000000000000000000000000000048000000000000000000000000000000000000000000000000000000000000000150000000000000000000000000000000000000000000000000000000000000064000000000000000000000000000000000000000000000000000000005e4d799e000000000000000000000000000000000000000000000000000000005e4eaefe000000000000000000000000000000000000000000000000000000005e4d799e000000000000000000000000000000000000000000000000000000005e4eaefe0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006400000000000000000000000000000000000000000000000000000000000000c8000000000000000000000000000000000000000000000000000000005e4d799e000000000000000000000000000000000000000000000000000000005e4eaefe000000000000000000000000000000000000000000000000000000005e4d799e000000000000000000000000000000000000000000000000000000005e4eaefe0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000006400000000000000000000000000000000000000000000000000000000000000c8000000000000000000000000000000000000000000000000000000005e4d799e000000000000000000000000000000000000000000000000000000005e4eaefe000000000000000000000000000000000000000000000000000000005e4d799e000000000000000000000000000000000000000000000000000000005e4eaefe000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000640000000000000000000000000000000000000000000000000000000000000009000000000000000000000000c9352e7c5b4c3ff202bf1cbc7f8ec8a659e7c98e000000000000000000000000c9352e7c5b4c3ff202bf1cbc7f8ec8a659e7c98e000000000000000000000000813a9cdaa69b617baa5f220686670b42c6af9edd000000000000000000000000c9352e7c5b4c3ff202bf1cbc7f8ec8a659e7c98e000000000000000000000000c9352e7c5b4c3ff202bf1cbc7f8ec8a659e7c98e000000000000000000000000813a9cdaa69b617baa5f220686670b42c6af9edd000000000000000000000000c9352e7c5b4c3ff202bf1cbc7f8ec8a659e7c98e000000000000000000000000c9352e7c5b4c3ff202bf1cbc7f8ec8a659e7c98e000000000000000000000000813a9cdaa69b617baa5f220686670b42c6af9edd00000000000000000000000000000000000000000000000000000000000000067669705f300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000726567756c61725f305f300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000726567756c61725f315f300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
        ]);
    });
});
